---
import BaseLayout from '../layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';

const latestArticles = (await getCollection('aktuelles', ({ data }) => !data.draft))
  .sort((a, b) => new Date(b.data.date).getTime() - new Date(a.data.date).getTime())
  .slice(0, 3);

function formatDate(d: string) {
  return new Date(d).toLocaleDateString('de-DE', { day: 'numeric', month: 'long', year: 'numeric' });
}
---
<BaseLayout title="Dialogwerk Niedersachsen â€“ Rechtssichere FÃ¼hrung & Coaching" description="Dialogwerk Niedersachsen: Professionelle KonfliktklÃ¤rung, Workshop-Moderation, Coaching und Seminare fÃ¼r Unternehmen, BetriebsrÃ¤te und FÃ¼hrungskrÃ¤fte.">

  <!-- Hero -->
  <section class="bg-gradient-to-br from-blue-900 via-blue-800 to-blue-700 text-white py-24 px-4">
    <div class="max-w-4xl mx-auto text-center">
      <h1 class="text-4xl md:text-6xl font-extrabold mb-6 leading-tight">
        Zusammenarbeit professionell gestalten.
      </h1>
      <p class="text-blue-100 text-xl mb-10 max-w-2xl mx-auto">
        KonfliktklÃ¤rung, Moderation, Coaching und Seminare fÃ¼r Unternehmen, BetriebsrÃ¤te und FÃ¼hrungskrÃ¤fte in Niedersachsen.
      </p>
      <div class="flex flex-wrap justify-center gap-4">
        <a href="/termin" class="bg-white text-blue-900 font-bold px-8 py-3 rounded-xl hover:bg-blue-50 transition text-lg">
          Jetzt Termin anfragen
        </a>
        <a href="/leistungen" class="border-2 border-white text-white font-bold px-8 py-3 rounded-xl hover:bg-white/10 transition text-lg">
          Leistungen ansehen
        </a>
      </div>
    </div>
  </section>

  <!-- Kernleistungen -->
  <section class="max-w-6xl mx-auto px-4 py-20">
    <h2 class="text-3xl font-bold text-center text-gray-900 mb-12">Womit wir Sie unterstÃ¼tzen</h2>
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
      {[
        { icon: 'ğŸ¤', title: 'KonfliktklÃ¤rung', text: 'Professionelle KlÃ¤rungsprozesse fÃ¼r Teams und FÃ¼hrungskrÃ¤fte â€“ vertraulich, neutral, ergebnisorientiert.', href: '/leistungen/mediation-konfliktklaerung' },
        { icon: 'ğŸ¯', title: 'Workshop-Moderation', text: 'Strukturierte Workshops und GroÃŸgruppen-Moderationen fÃ¼r Ergebnisse, die Bestand haben.', href: '/leistungen/moderation' },
        { icon: 'ğŸ›¡ï¸', title: 'Arbeitsschutz', text: 'Praxisnahe Unterweisungen und Workshop-Formate â€“ verschlankt, interaktiv, alltagstauglich.', href: '/leistungen/arbeitsschutz' },
        { icon: 'âš–ï¸', title: 'Sozialversicherung', text: 'Schulungen im Sozialversicherungsrecht â€“ verstÃ¤ndlich aufbereitet, keine Rechtsberatung im Einzelfall.', href: '/leistungen/sozialversicherungsrecht' },
      ].map(item => (
        <a href={item.href} class="group bg-white rounded-xl border border-gray-200 p-6 hover:shadow-lg hover:border-blue-200 transition">
          <div class="text-3xl mb-3">{item.icon}</div>
          <h3 class="font-bold text-gray-900 mb-2 group-hover:text-blue-700 transition">{item.title}</h3>
          <p class="text-gray-500 text-sm leading-relaxed">{item.text}</p>
        </a>
      ))}
    </div>
  </section>

  <!-- Aktuelles -->
  <section class="bg-gray-50 py-20 px-4">
    <div class="max-w-6xl mx-auto">
      <div class="flex items-center justify-between mb-10">
        <h2 class="text-3xl font-bold text-gray-900">Neues aus dem Dialogwerk</h2>
        <a href="/aktuelles" class="text-blue-700 font-semibold hover:underline text-sm">Alle BeitrÃ¤ge â†’</a>
      </div>
      <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
        {latestArticles.map(article => (
          <a href={`/aktuelles/${article.slug}`} class="group bg-white rounded-xl border border-gray-200 p-6 hover:shadow-lg hover:border-blue-200 transition">
            <div class="flex items-center gap-2 mb-3">
              <span class="bg-blue-100 text-blue-800 text-xs font-semibold px-2 py-0.5 rounded-full">{article.data.category}</span>
              <span class="text-gray-400 text-xs">{formatDate(article.data.date)}</span>
            </div>
            <h3 class="font-bold text-gray-900 mb-2 group-hover:text-blue-700 transition leading-snug">{article.data.title}</h3>
            <p class="text-gray-500 text-sm leading-relaxed line-clamp-2">{article.data.description}</p>
            <div class="mt-3 text-blue-700 text-sm font-semibold">Weiterlesen â†’</div>
          </a>
        ))}
      </div>
    </div>
  </section>

  <!-- CTA -->
  <section class="max-w-3xl mx-auto px-4 py-20 text-center">
    <h2 class="text-3xl font-bold text-gray-900 mb-4">Bereit fÃ¼r den nÃ¤chsten Schritt?</h2>
    <p class="text-gray-600 mb-8">Vereinbaren Sie ein unverbindliches VorgesprÃ¤ch. Wir finden gemeinsam die passende LÃ¶sung.</p>
    <div class="flex flex-wrap justify-center gap-4">
      <a href="/termin" class="bg-blue-700 text-white font-bold px-8 py-3 rounded-xl hover:bg-blue-800 transition">
        Termin anfragen
      </a>
      <a href="tel:01751443522" class="border-2 border-gray-300 text-gray-700 font-bold px-8 py-3 rounded-xl hover:bg-gray-50 transition">
        ğŸ“ 0175/1443522
      </a>
    </div>
  </section>

</BaseLayout>
